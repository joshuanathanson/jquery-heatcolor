jQuery.fn.heatcolor=function(e,t){var n={elementFunction:function(){return jQuery(this)},minval:0,maxval:0,lightness:.75,colorStyle:"roygbiv",reverseOrder:false};if(t){jQuery.extend(n,t)}var r={findcolor:function(e,t,r){var i=(e-t)/(r-t);var s=n.colorStyle=="roygbiv"?.5*i+1.7*(1-i):i+.2+5.5*(1-i);var o=128;var u=2*Math.PI;var a=s+i*u;a=n.colorStyle!="roygbiv"?-a:a;var f=this.process(Math.floor((Math.cos(a)+1)*o));var l=this.process(Math.floor((Math.cos(a+Math.PI/2)+1)*o));var c=this.process(Math.floor((Math.cos(a+Math.PI)+1)*o));return"#"+f+l+c},process:function(e){var t=Math.floor(e+n.lightness*(256-e));var r=t.toString(16);r=r.length==1?"0"+r:r;return r},setMaxAndMin:function(t){var r=0,i=0;t.each(function(){var t=e.apply(jQuery(this));if(t<r||r==0){r=t}if(t>i){i=t}});n.maxval=!n.reverseOrder?i:r;n.minval=!n.reverseOrder?r:i}};if(!n.minval&&!n.maxval){r.setMaxAndMin(jQuery(this))}else{if(n.reverseOrder){var i=n.minval;n.minval=n.maxval;n.maxval=i}}this.each(function(){var t=jQuery(this);var i=e.apply(t);var s=r.findcolor(i,n.minval,n.maxval);var o=n.elementFunction.apply(t);if(o[0].nodeType==1){o.css("background-color",s)}else if(o[0].nodeType==3){o.css("color",s)}});return this}